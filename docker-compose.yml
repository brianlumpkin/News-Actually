version: "3.9"\nservices:\n  db:\n    image: postgres:16\n    environment:\n      POSTGRES_DB: ${POSTGRES_DB:-receiptsfeed}\n      POSTGRES_USER: ${POSTGRES_USER:-postgres}\n      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-postgres}\n    ports:\n      - "5432:5432"\n    volumes:\n      - pgdata:/var/lib/postgresql/data\n\n  api:\n    image: python:3.11-slim\n    working_dir: /app\n    volumes:\n      - ./:/app\n    environment:\n      DATABASE_URL: ${DATABASE_URL:-postgresql+psycopg2://postgres:postgres@db:5432/receiptsfeed}\n      FEED_URLS: ${FEED_URLS:-https://rss.nytimes.com/services/xml/rss/nyt/World.xml}\n    command: bash -lc "pip install -r requirements.txt && uvicorn receiptsfeed.api.main:app --host 0.0.0.0 --port 8000 --reload"\n    ports:\n      - "8000:8000"\n    depends_on:\n      - db\n\nvolumes:\n  pgdata:\n